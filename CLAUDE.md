# RSS Slack Consolidator - Claude Configuration

> **Auto-generated by project-bootstrap on 2025-11-27**
> **Quick Setup Mode - Auto-detected Tech Stack**

## ğŸ“ Repository Information

**Git Repository:** rss-slack-consolidator
- Owner: lachlancowie
- Repository: rss-slack-consolidator
- Main Branch: main

## ğŸ“– Project Overview

**RSS Feed Consolidation & Slack Publisher**

An automated system that consolidates multiple RSS feeds, intelligently reviews content, and publishes relevant items to Slack channels.

**Purpose:** Automate the process of monitoring multiple RSS feeds and surfacing relevant content to team Slack channels, eliminating manual feed checking.

**Users:** Team members who need curated, relevant updates from multiple RSS sources in one place (Slack).

**Tech Stack:**
- **Language:** Python 3.11+
- **RSS Parsing:** feedparser
- **Slack Integration:** slack-sdk
- **Storage:** JSON files (feed config, tracking posted items)
- **Scheduling:** GitHub Actions (cron-based periodic execution)
- **Deployment:** GitHub Actions (runs directly in GitHub infrastructure)

## ğŸ¤– Subagents (Specialized AI Assistants)

This project uses specialized subagents to optimize context usage and task efficiency.

### Available Subagents

| Subagent | Purpose | When to Use |
|----------|---------|-------------|
| **general-assistant** | Day-to-day development, code editing, file operations | Default for all coding tasks |
| **deployment-specialist** | Git workflow, GitHub Actions, GitHub Secrets management | GitHub Actions setup, workflow debugging |

### How to Use Subagents

**Automatic Invocation:**
Claude will automatically delegate tasks to the appropriate subagent.

**Explicit Invocation:**
```
> Use the deployment-specialist to set up GitHub Actions secrets
> Use the deployment-specialist to debug workflow failures
```

**Examples:**
```
# GitHub Actions / Deployment
> Use the deployment-specialist to add new GitHub Secrets
> Use the deployment-specialist to fix the workflow

# General development (automatic)
> Add error handling to the RSS parser
> Improve the relevance scoring algorithm
```

### Subagent Files

All subagents are in `.claude/agents/`:
- `general-assistant.md` - Day-to-day development
- `deployment-specialist.md` - GitHub Actions workflows

## Development Workflow

### Default Workflow:
1. ğŸ“‹ Track tasks with TodoWrite
2. ğŸ› ï¸ Implement changes to main.py
3. âœ… Test locally with sample RSS feeds
4. ğŸ“¤ Commit and push to GitHub
5. âš™ï¸ GitHub Actions runs automatically
6. ğŸŒ Verify posts in Slack channel

### Local Development
```bash
# Set up virtual environment
python -m venv venv
source venv/bin/activate  # or `venv\Scripts\activate` on Windows

# Install dependencies
pip install -r requirements.txt

# Set environment variables
export SLACK_BOT_TOKEN="xoxb-your-token"
export SLACK_CHANNEL_ID="C1234567890"

# Run locally (single execution)
python main.py

# Check tracking file
cat data/tracking.json
```

## ğŸ“Š Data Storage

### JSON-Based Configuration

**feeds.json** - Feed configuration:
```json
{
  "feeds": [
    {
      "name": "Python Insider",
      "url": "https://blog.python.org/feeds/posts/default",
      "enabled": true,
      "keywords": ["release", "security"]
    }
  ],
  "settings": {
    "min_relevance_score": 0.5,
    "max_posts_per_run": 10,
    "hours_lookback": 24
  }
}
```

**data/tracking.json** - Posted items tracking:
```json
{
  "posted_items": ["guid1", "guid2", ...],
  "last_check": "2025-11-27T10:00:00Z",
  "stats": {
    "total_items_posted": 42,
    "last_run_posted": 3,
    "last_run_time": "2025-11-27T10:00:00Z"
  }
}
```

### Best Practices
- Keep tracking.json in git (committed by GitHub Actions)
- Limit tracked GUIDs to last 1000 items (prevents file bloat)
- Use ISO 8601 timestamps for all dates
- Validate feeds.json syntax before committing

## ğŸš€ Deployment Workflow

### GitHub Actions Setup

**1. Set up GitHub Secrets:**
```bash
# Go to: GitHub repo â†’ Settings â†’ Secrets and variables â†’ Actions
# Add repository secrets:
SLACK_BOT_TOKEN=xoxb-...
SLACK_CHANNEL_ID=C...
```

**2. Enable GitHub Actions:**
- Actions should be enabled by default
- Workflow file: `.github/workflows/rss-slack.yml`
- Runs on schedule (hourly) and on push to main

**3. Configure Feeds:**
```bash
# Edit feeds.json to add/remove RSS feeds
git add feeds.json
git commit -m "feat: Add new RSS feeds"
git push
```

**4. Monitor Execution:**
```bash
# View in GitHub UI:
# Actions tab â†’ "RSS to Slack" workflow

# Or use GitHub CLI:
gh run list --workflow=rss-slack.yml
gh run view --log  # View latest logs
```

### Manual Trigger
```bash
# Trigger workflow manually via GitHub UI
# Actions â†’ RSS to Slack â†’ Run workflow

# Or via GitHub CLI:
gh workflow run rss-slack.yml
```

## ğŸ“¡ RSS Feed Processing

### Supported Feed Types
- RSS 2.0
- Atom 1.0
- RSS 1.0 (RDF)

### Feed Parsing Strategy
```python
import feedparser

# Robust parsing with error handling
feed = feedparser.parse(url)
if feed.bozo:
    # Handle malformed feeds
    pass
```

### Content Filtering
Implement relevance scoring based on:
- Keywords matching
- Source credibility
- Recency
- Engagement metrics (if available)

## ğŸ’¬ Slack Integration

### Bot Setup Requirements
1. Create Slack App at api.slack.com/apps
2. Enable Bot Token Scopes:
   - `chat:write` - Post messages
   - `chat:write.public` - Post to public channels
   - `files:write` - Upload files (optional)
3. Install app to workspace
4. Invite bot to target channel: `/invite @BotName`

### Message Formatting
```python
from slack_sdk import WebClient

client = WebClient(token=os.environ["SLACK_BOT_TOKEN"])

# Rich message formatting
client.chat_postMessage(
    channel=channel_id,
    blocks=[
        {
            "type": "section",
            "text": {"type": "mrkdwn", "text": f"*{title}*\n{summary}"}
        },
        {
            "type": "actions",
            "elements": [
                {"type": "button", "text": {"type": "plain_text", "text": "Read More"}, "url": link}
            ]
        }
    ]
)
```

## â° Scheduling

### GitHub Actions Cron
Scheduling is handled by GitHub Actions cron syntax in `.github/workflows/rss-slack.yml`:

```yaml
on:
  schedule:
    - cron: '0 * * * *'  # Every hour at minute 0
```

**Common cron schedules:**
```yaml
# Every 30 minutes
- cron: '*/30 * * * *'

# Every 3 hours
- cron: '0 */3 * * *'

# Twice daily (9 AM and 5 PM UTC)
- cron: '0 9,17 * * *'

# Business hours only (Mon-Fri, 9 AM - 5 PM UTC)
- cron: '0 9-17 * * 1-5'
```

**Cron syntax:** `minute hour day month day-of-week`

## ğŸ§ª Testing Guidelines

### Local Testing
```bash
# Test full run locally
python main.py

# Check what would be posted (dry run)
# (Add --dry-run flag if implemented)

# Test specific feed
# Temporarily set only one feed to enabled: true in feeds.json
python main.py

# Verify tracking file updates
cat data/tracking.json
```

### GitHub Actions Testing
```bash
# Test workflow on push (faster than waiting for cron)
git commit --allow-empty -m "test: Trigger workflow"
git push

# View logs
gh run watch
```

## ğŸ“ Project Structure

```
rss-slack-consolidator/
â”œâ”€â”€ main.py                      # Single-file implementation (RSS â†’ Slack)
â”œâ”€â”€ feeds.json                   # Feed configuration (what to monitor)
â”œâ”€â”€ requirements.txt             # Python dependencies
â”œâ”€â”€ README.md                    # Project documentation
â”œâ”€â”€ .env.example                 # Environment variable template
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ rss-slack.yml        # GitHub Actions workflow
â”œâ”€â”€ data/
â”‚   â””â”€â”€ tracking.json            # Posted items tracking (auto-updated)
â””â”€â”€ .claude/
    â””â”€â”€ agents/                  # Subagent configurations
```

**Key Files:**
- **main.py** - Complete implementation in single file (~200 lines)
- **feeds.json** - User-editable feed configuration
- **data/tracking.json** - Auto-managed by GitHub Actions
- **.github/workflows/rss-slack.yml** - Scheduling and execution

## Quick Reference

| Task | Tool/Command |
|------|-------------|
| Add new RSS feed | Edit `feeds.json`, add entry, commit & push |
| Test locally | `python main.py` |
| View tracking data | `cat data/tracking.json` |
| Check GitHub Actions | `gh run list` or GitHub UI Actions tab |
| View workflow logs | `gh run view --log` |
| Trigger manual run | `gh workflow run rss-slack.yml` |
| Set GitHub Secret | GitHub UI â†’ Settings â†’ Secrets â†’ Actions |

## ğŸ¯ Next Steps

1. **Set up Slack Bot:**
   - Go to api.slack.com/apps
   - Create new app â†’ "From scratch"
   - Add OAuth scopes: `chat:write`, `chat:write.public`
   - Install to workspace
   - Copy bot token (starts with xoxb-)
   - Invite bot to target channel: `/invite @BotName`

2. **Configure GitHub Secrets:**
   ```bash
   # Go to: GitHub repo â†’ Settings â†’ Secrets and variables â†’ Actions
   # Add secrets:
   # - SLACK_BOT_TOKEN (your xoxb- token)
   # - SLACK_CHANNEL_ID (from Slack channel URL)
   ```

3. **Add RSS feeds:**
   ```bash
   # Edit feeds.json
   # Add your desired feeds with keywords
   ```

4. **Test locally first:**
   ```bash
   # Create .env file
   cp .env.example .env
   # Add your tokens to .env

   # Install dependencies
   pip install -r requirements.txt

   # Run once
   python main.py
   ```

5. **Deploy to GitHub:**
   ```bash
   git add .
   git commit -m "feat: Configure RSS feeds and Slack integration"
   git push
   ```

6. **Verify execution:**
   - Check GitHub Actions tab
   - View workflow run logs
   - Verify posts in Slack channel

## ğŸ’¡ Tips

- **Start small:** Test with 2-3 feeds before scaling up
- **Use test channel:** Create #rss-test channel for initial testing
- **Monitor tracking.json:** Check git history to see what's being posted
- **Adjust keywords:** Tune keyword matching to improve relevance
- **Check limits:** GitHub Actions has 2,000 free minutes/month (plenty for this)
- **Hourly is fine:** Most RSS feeds update hourly or less frequently
- **Keywords optional:** Leave keywords array empty to post everything
- **Disable feeds:** Set `"enabled": false` instead of deleting

## ğŸ” Troubleshooting

**Workflow not running:**
- Check GitHub Actions is enabled (Settings â†’ Actions)
- Verify cron syntax in workflow file
- GitHub Actions cron can be delayed up to 10 minutes

**No posts to Slack:**
- Verify secrets are set correctly (no quotes in secret values)
- Check bot is invited to channel
- Review workflow logs for errors

**Duplicate posts:**
- Check data/tracking.json is being committed
- Verify workflow has write permissions

**Too many/few posts:**
- Adjust `max_posts_per_run` in feeds.json
- Tune `min_relevance_score` (0.0 = post all, 1.0 = only perfect matches)

---

*Redesigned with GitHub Actions architecture - zero infrastructure, zero cost!*
