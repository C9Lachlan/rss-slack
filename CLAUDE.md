# RSS Slack Consolidator - Claude Configuration

> **Auto-generated by project-bootstrap on 2025-11-27**
> **Quick Setup Mode - Auto-detected Tech Stack**

## ğŸ“ Repository Information

**Git Repository:** rss-slack-consolidator
- Owner: lachlancowie
- Repository: rss-slack-consolidator
- Main Branch: main

## ğŸ“– Project Overview

**RSS Feed Consolidation & Slack Publisher**

An automated system that consolidates multiple RSS feeds, intelligently reviews content, and publishes relevant items to Slack channels.

**Purpose:** Automate the process of monitoring multiple RSS feeds and surfacing relevant content to team Slack channels, eliminating manual feed checking.

**Users:** Team members who need curated, relevant updates from multiple RSS sources in one place (Slack).

**Tech Stack:**
- **Language:** Python 3.11+
- **RSS Parsing:** feedparser
- **Slack Integration:** slack-sdk
- **Database:** SQLite (feed history, published items tracking)
- **Scheduling:** APScheduler (periodic feed checks)
- **Deployment:** Railway / Render (containerized Python service)

## ğŸ¤– Subagents (Specialized AI Assistants)

This project uses specialized subagents to optimize context usage and task efficiency.

### Available Subagents

| Subagent | Purpose | When to Use |
|----------|---------|-------------|
| **general-assistant** | Day-to-day development, code editing, file operations | Default for all coding tasks |
| **database-specialist** | SQLite schema design, migrations, query optimization | Database operations, schema changes |
| **deployment-specialist** | Git workflow, Railway/Render deployments, environment config | Deployments, CI/CD, production issues |

### How to Use Subagents

**Automatic Invocation:**
Claude will automatically delegate tasks to the appropriate subagent.

**Explicit Invocation:**
```
> Use the database-specialist to create a feeds tracking table
> Use the deployment-specialist to deploy this to Railway
```

**Examples:**
```
# Database operations
> Use the database-specialist to add a new column for feed priority

# Deployment
> Use the deployment-specialist to set up environment variables
> Use the deployment-specialist to deploy the latest changes

# General development (automatic)
> Add error handling to the RSS parser
> Implement rate limiting for Slack posts
```

### Subagent Files

All subagents are in `.claude/agents/`:
- `general-assistant.md` - Day-to-day development
- `database-specialist.md` - SQLite operations
- `deployment-specialist.md` - Railway/Render deployments

## Development Workflow

### Default Workflow:
1. ğŸ“‹ Track tasks with TodoWrite
2. ğŸ› ï¸ Implement changes
3. âœ… Test locally with sample RSS feeds
4. ğŸš€ Deploy to Railway/Render
5. ğŸŒ Verify feed processing and Slack posting

### Local Development
```bash
# Set up virtual environment
python -m venv venv
source venv/bin/activate  # or `venv\Scripts\activate` on Windows

# Install dependencies
pip install -r requirements.txt

# Set environment variables
export SLACK_BOT_TOKEN="xoxb-your-token"
export SLACK_CHANNEL_ID="C1234567890"

# Run locally
python main.py
```

## ğŸ“Š Database Guidelines

### SQLite Schema Design

**feeds table:**
- Track configured RSS feeds
- Store last check timestamp
- Feed metadata (URL, title, update frequency)

**feed_items table:**
- Store parsed feed items
- Track publication status
- Enable duplicate detection

**Example Schema:**
```sql
CREATE TABLE feeds (
    id INTEGER PRIMARY KEY,
    url TEXT UNIQUE NOT NULL,
    title TEXT,
    check_frequency INTEGER DEFAULT 3600,
    last_checked TIMESTAMP,
    active BOOLEAN DEFAULT 1
);

CREATE TABLE feed_items (
    id INTEGER PRIMARY KEY,
    feed_id INTEGER,
    guid TEXT UNIQUE NOT NULL,
    title TEXT,
    link TEXT,
    published TIMESTAMP,
    posted_to_slack BOOLEAN DEFAULT 0,
    slack_ts TEXT,
    FOREIGN KEY (feed_id) REFERENCES feeds(id)
);
```

### Query Best Practices
- Use parameterized queries to prevent SQL injection
- Index frequently queried columns (guid, published, posted_to_slack)
- Use transactions for bulk operations
- Regular VACUUM to maintain database health

## ğŸš€ Deployment Workflow

### Environment Variables
```bash
# Required
SLACK_BOT_TOKEN=xoxb-...
SLACK_CHANNEL_ID=C...

# Optional
DATABASE_PATH=./data/feeds.db
CHECK_INTERVAL=3600
LOG_LEVEL=INFO
```

### Railway Deployment
```bash
# Install Railway CLI
npm install -g railway

# Login and link project
railway login
railway link

# Set environment variables
railway variables set SLACK_BOT_TOKEN=xoxb-...

# Deploy
git add .
git commit -m "feat: RSS feed processor"
git push
railway up
```

### Render Deployment
```bash
# Create render.yaml for configuration
# Deploy via Render dashboard or CLI
render deploy
```

## ğŸ“¡ RSS Feed Processing

### Supported Feed Types
- RSS 2.0
- Atom 1.0
- RSS 1.0 (RDF)

### Feed Parsing Strategy
```python
import feedparser

# Robust parsing with error handling
feed = feedparser.parse(url)
if feed.bozo:
    # Handle malformed feeds
    pass
```

### Content Filtering
Implement relevance scoring based on:
- Keywords matching
- Source credibility
- Recency
- Engagement metrics (if available)

## ğŸ’¬ Slack Integration

### Bot Setup Requirements
1. Create Slack App at api.slack.com/apps
2. Enable Bot Token Scopes:
   - `chat:write` - Post messages
   - `chat:write.public` - Post to public channels
   - `files:write` - Upload files (optional)
3. Install app to workspace
4. Invite bot to target channel: `/invite @BotName`

### Message Formatting
```python
from slack_sdk import WebClient

client = WebClient(token=os.environ["SLACK_BOT_TOKEN"])

# Rich message formatting
client.chat_postMessage(
    channel=channel_id,
    blocks=[
        {
            "type": "section",
            "text": {"type": "mrkdwn", "text": f"*{title}*\n{summary}"}
        },
        {
            "type": "actions",
            "elements": [
                {"type": "button", "text": {"type": "plain_text", "text": "Read More"}, "url": link}
            ]
        }
    ]
)
```

## ğŸ”„ Scheduled Processing

### APScheduler Setup
```python
from apscheduler.schedulers.blocking import BlockingScheduler

scheduler = BlockingScheduler()

@scheduler.scheduled_job('interval', hours=1)
def check_feeds():
    # Process all active feeds
    pass

scheduler.start()
```

### Cron-based Alternative
```bash
# crontab entry for hourly checks
0 * * * * cd /path/to/project && python main.py
```

## ğŸ§ª Testing Guidelines

### Local Testing
```bash
# Test with sample feed
python test_parser.py --url "https://example.com/feed.xml"

# Test Slack posting (use test channel)
python test_slack.py --channel "#test-feed-bot"
```

### Unit Tests (when added)
```bash
pytest tests/
pytest tests/ --cov=src/
```

## ğŸ“ Project Structure

```
rss-slack-consolidator/
â”œâ”€â”€ main.py                 # Entry point
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ README.md              # Project documentation
â”œâ”€â”€ .env.example           # Environment variable template
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ feed_parser.py     # RSS parsing logic
â”‚   â”œâ”€â”€ slack_poster.py    # Slack integration
â”‚   â”œâ”€â”€ database.py        # SQLite operations
â”‚   â”œâ”€â”€ scheduler.py       # Periodic job management
â”‚   â””â”€â”€ filters.py         # Content relevance filtering
â”œâ”€â”€ data/
â”‚   â””â”€â”€ feeds.db           # SQLite database
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_parser.py     # Unit tests
â””â”€â”€ .claude/
    â””â”€â”€ agents/            # Subagent configurations
```

## Quick Reference

| Task | Tool/Command |
|------|-------------|
| Add new RSS feed | `python cli.py add-feed <url>` |
| List tracked feeds | `python cli.py list-feeds` |
| Test feed parsing | `python cli.py test-feed <url>` |
| Check database | `sqlite3 data/feeds.db` |
| View logs | `tail -f logs/app.log` |
| Deploy to Railway | `railway up` |
| Set env variable | `railway variables set KEY=value` |

## ğŸ¯ Next Steps

1. **Create project structure:**
   ```bash
   mkdir -p src data tests logs
   touch main.py requirements.txt README.md .env.example
   ```

2. **Install core dependencies:**
   ```bash
   pip install feedparser slack-sdk apscheduler python-dotenv
   pip freeze > requirements.txt
   ```

3. **Set up Slack Bot:**
   - Create app at api.slack.com/apps
   - Get bot token (starts with xoxb-)
   - Invite bot to channel

4. **Initialize database:**
   ```bash
   python -c "from src.database import init_db; init_db()"
   ```

5. **Add first RSS feed and test:**
   ```bash
   python main.py --test-feed "https://example.com/feed.xml"
   ```

6. **Deploy:**
   ```bash
   git add .
   git commit -m "feat: Initial RSS Slack consolidator"
   # Use deployment-specialist for Railway/Render setup
   ```

## ğŸ’¡ Tips

- Start with 2-3 feeds to test the system
- Use a test Slack channel initially
- Implement duplicate detection early (check `guid` field)
- Add rate limiting to respect Slack API limits
- Log all feed parsing errors for debugging
- Consider adding a simple web dashboard later (Flask/FastAPI)

---

*Generated with Quick Setup mode - customize as needed for your team!*
